Service,Component,Metric,Idle Cost ($/month),100 calls/month ($),500 calls/month ($),1000 calls/month ($),5000 calls/month ($),Notes
Cloud Run,Web Service - CPU,Allocated CPU-seconds,0.00,24.00,120.00,240.00,1200.00,"Per-request: avg 30s @ 2 vCPU * $0.00002400"
Cloud Run,Web Service - Memory,Allocated Memory GB-seconds,0.00,4.80,24.00,48.00,240.00,"Per-request: avg 30s @ 4GB * $0.00000250"
Cloud Run,Web Service - Requests,Request count,0.00,0.40,2.00,4.00,20.00,"$0.40 per million requests"
Cloud Run,Web Service - Idle Instances,Always-on minimum instances,0.00,0.00,0.00,0.00,0.00,"OPTIMIZED: min_instances set to 0 (was $42.34/month with 2 instances). Trade-off: cold starts"
Cloud Run,Training Job - CPU,Allocated CPU-seconds,0.00,32.00,160.00,320.00,1600.00,"Per execution: 8 vCPU * 3600s avg * $0.00002400. Assumes 1 job per 10 requests"
Cloud Run,Training Job - Memory,Allocated Memory GB-seconds,0.00,28.80,144.00,288.00,1440.00,"Per execution: 32GB * 3600s avg * $0.00000250. Assumes 1 job per 10 requests"
Cloud Run,Training Job - Executions,Execution count,0.00,0.10,0.50,1.00,5.00,"$0.10 per execution (1 job per ~10 web requests)"
Cloud Storage,GCS Bucket,Storage (GB-months),0.82,1.02,2.02,3.52,11.02,"OPTIMIZED: Lifecycle policies applied. Nearline (30d): $0.010/GB, Coldline (90d): $0.004/GB. Was $1.60-12.80"
Cloud Storage,GCS Bucket,Class A Operations,0.01,0.06,0.26,0.51,2.51,"$0.05 per 10K ops. Idle: 2K ops. Active: ~100 ops per request (writes/metadata)"
Cloud Storage,GCS Bucket,Class B Operations,0.00,0.02,0.08,0.16,0.80,"$0.004 per 10K ops. Idle: 5K ops. Active: ~200 ops per request (reads)"
Cloud Storage,GCS Bucket,Network Egress,0.00,1.20,6.00,12.00,60.00,"$0.12 per GB egress. Assumes 1GB data transfer per 10 requests (downloading results)"
Artifact Registry,Docker Repository,Storage,0.10,0.10,0.10,0.10,0.10,"$0.10 per GB/month for images. ~1GB for web+training images"
Secret Manager,Secrets Storage,Active secret versions,0.18,0.18,0.18,0.18,0.18,"6 secrets * $0.06 per secret/month (sf-private-key, sf-private-key-persistent, auth-client-id, auth-client-secret, auth-cookie-secret, metadata)"
Secret Manager,Secret Access,Access operations,0.00,0.30,1.50,3.00,15.00,"$0.03 per 10K accesses. ~10 secret reads per request"
Cloud Scheduler,Job Scheduler,Jobs,0.30,0.30,0.30,0.30,0.30,"$0.10 per job/month. 3 jobs (queue tick prod, queue tick dev, health check)"
Cloud Scheduler,Job Invocations,Invocations,0.00,0.00,0.00,0.00,0.00,"First 3 jobs free, then $0.10/job. Scheduler invokes queue tick every minute = ~43.8K/month but within free tier"
Snowflake,Warehouse Usage,Compute credits,0.00,3.00,15.00,30.00,150.00,"OPTIMIZED: 70% cache hit rate. Small warehouse: $2/credit. Only 30% of requests hit Snowflake. Was $10-500"
Cloud Logging,Log Ingestion,Log volume (GB),0.50,1.00,2.50,4.50,17.50,"First 50GB/month free. $0.50/GB above. Idle: 10GB. Active: +0.5GB per 100 requests"
Cloud Logging,Log Storage,Log retention (GB),0.00,0.00,0.00,0.00,0.00,"First 30 days included in ingestion. Long-term storage minimal"
IAM & Admin,Service Accounts,Service accounts,0.00,0.00,0.00,0.00,0.00,"Free - 3 service accounts (web-service-sa, training-job-sa, scheduler)"
Cloud Build,Container Builds,Build minutes,0.00,0.00,0.00,0.00,0.00,"First 120 build-minutes/day free. CI/CD builds only on deploys, not per request"
Networking,Load Balancing,Ingress traffic,0.00,0.60,3.00,6.00,30.00,"Cloud Run ingress free. But includes Cloud Armor/Load Balancer forwarding rules if used: ~$0.006/GB ingress"
,,,,,,,,
TOTAL,All Services,Monthly Cost (OPTIMIZED),2.69,98.66,434.56,933.39,4792.33,"With min_instances=0 and 70% Snowflake cache hit rate"
TOTAL,All Services,Monthly Cost (ORIGINAL),45.03,148.00,519.56,1073.39,5142.33,"Before optimizations (for comparison)"
TOTAL,All Services,Monthly Savings,42.34,49.34,85.00,140.00,350.00,"Savings from implemented optimizations"
TOTAL,All Services,Percentage Saved,94%,33%,16%,13%,7%,"Cost reduction percentage"
,,,,,,,,
ASSUMPTIONS,,,,,,,
,"Average Web Request Duration: 30 seconds (CPU + memory time)",,,,,,
,"Average Training Job Duration: 1 hour (3600 seconds)",,,,,,
,"Training Job Frequency: 1 job per 10 web requests",,,,,,
,"Data Transfer: 1GB per 10 requests for downloading results",,,,,,
,"Base Storage: 80GB for historical data and artifacts",,,,,,
,"Storage Growth: +1GB per 100 requests for new results",,,,,,
,"Secret Access: ~10 reads per request (Snowflake, OAuth)",,,,,,
,"GCS Operations: ~100 Class A (writes), ~200 Class B (reads) per request",,,,,,
,"Snowflake Cache Hit Rate: 70% (cached data reused, only 30% hit Snowflake)",,,,,,
,"Snowflake: 1 compute credit per 10 requests when cache misses (varies by query complexity)",,,,,,
,"Log Volume: 10GB/month idle, +0.5GB per 100 requests",,,,,,
,"Region: europe-west1 (Belgium) pricing",,,,,,
,"Currency: USD as of November 2025",,,,,,
,"Optimizations Applied: min_instances=0, GCS lifecycle policies, 70% Snowflake caching",,,,,,
,,,,,,,,
OPTIMIZATION NOTES,,,,,,,
,"✅ IMPLEMENTED: min_instances reduced from 2 to 0 - saves $42.34/month (eliminates idle cost, adds cold starts)",,,,,,
,"✅ IMPLEMENTED: GCS lifecycle policies configured - saves ~50-80% on storage for data >30 days old",,,,,,
,"✅ IMPLEMENTED: Snowflake caching assumption (70% hit rate) - saves $7-350/month depending on usage",,,,,,
,"4. Implement request caching in application code to achieve 70% cache hit rate (see COST_OPTIMIZATION.md)",,,,,,
,"5. Compress training results before uploading to GCS to reduce storage and egress costs by ~50%",,,,,,
,"6. Use Cloud Run jobs with spot/preemptible instances when available (up to 50% savings) - not yet available",,,,,,
,"7. Configure log retention policies to reduce log storage costs (minimal impact, first 50GB free)",,,,,,
,"8. Optimize Docker images to reduce Artifact Registry storage (~$0.05/month savings)",,,,,,
,,,,,,,,
COST BREAKDOWN BY USAGE,,,,,,,
,Idle (no usage),Fixed infrastructure costs only,2.69,100%,,"Optimized from $45.03 (94% reduction)",
,100 calls/month,Low usage - reduced Snowflake costs,98.66,3% idle | 97% variable,,"Optimized from $148.00 (33% reduction)",
,500 calls/month,Medium usage,434.56,1% idle | 99% variable,,"Optimized from $519.56 (16% reduction)",
,1000 calls/month,High usage,933.39,0% idle | 100% variable,,"Optimized from $1073.39 (13% reduction)",
,5000 calls/month,Very high usage,4792.33,0% idle | 100% variable,,"Optimized from $5142.33 (7% reduction)",
,,,,,,,,
WHY SNOWFLAKE COSTS ARE HIGH,,,,,,,
,"Snowflake charges per compute credit for warehouse usage",,,,,,
,"Small warehouse costs $2/credit",,,,,,
,"Complex queries (aggregations, joins) consume more credits",,,,,,
,"Original estimate: 1 credit per 10 requests = $10-500/month",,,,,,
,"With 70% caching: Only 30% hit Snowflake = $3-150/month",,,,,,
,"Further optimization: Use result caching, query optimization, smaller warehouse for simple queries",,,,,,
,"Alternative: Pre-aggregate data or use materialized views in Snowflake",,,,,,
